<!doctype html>
<html>
<head>
  <title>Meteor showers from space</title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@iwebst">
  <meta name="twitter:title" content="Meteor showers from space">
  <meta name="twitter:description" content="Watch Earth fly into clouds of meteors.">
  <meta name="twitter:creator" content="@iwebst">
  <meta name="twitter:image" content="http://i.imgur.com/n5U34ah.png">

  <meta property="og:title" content="Meteor showers from space" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://i.imgur.com/n5U34ah.png" />
  <meta property="og:description" content="Watch Earth fly into clouds of meteors." />

  <!-- Allow fullscreen app install -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <link type="text/css" href="css/main.css" rel="stylesheet" />
  <link type="text/css" href="css/jquery.modal.css" rel="stylesheet" />

</head>
<body>
  <div id="summary" class="maximized">
    <span id="normal-summary">
      <h2>Upcoming: <span id="meteor-shower-name"></span> meteor shower</h2>
      <span class="description">
        This shower peaks in <span id="meteor-shower-peak"></span>, when Earth intersects the dust cloud left by <span id="meteor-shower-source-type">comet</span> <span id="meteor-shower-object-name"></span>.  <a href="#faq-modal" rel="modal:open">Learn more</a>.
      </span>
    </span>
    <span id="view-all-summary" style="display:none">
      <h2>All major meteor showers</h2>
      These showers occur at various points of the year and originate from multiple comets and asteroids.
    </span>
    <span id="iau-summary" style="display:none">
      <h2>IAU Shower #<span id="iau-shower-number"></span></h2>
      Data from the 2013 <a href="http://cams.seti.org/">NASA CAMS</a> dataset.
    </span>

    <ul class="share-buttons">
      <li><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.ianww.com/meteor-showers" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&t=' + encodeURIComponent(document.URL)); return false;"><img src="img/flat_web_icon_set/black/Facebook.png"></a></li>
      <li><a href="https://twitter.com/intent/tweet?source=http://www.ianww.com/meteor-showers&text=:http://ianww.com/meteor-showers&via=iwebst" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.URL)); return false;"><img src="img/flat_web_icon_set/black/Twitter.png"></a></li>
      <li><a href="https://plus.google.com/share?url=http://www.ianww.com/meteor-showers" title="Share on Google+" target="_blank"><img src="img/flat_web_icon_set/black/Google+.png"></a></li>
      <li><a href="mailto:?subject=&body=http://www.ianww.com/meteor-showers" target="_blank" title="Email" onclick="window.open('mailto:?subject=' + encodeURIComponent(document.title) + '&body=' +  encodeURIComponent(document.URL)); return false;"><img src="img/flat_web_icon_set/black/Email.png"></a></li>
    </ul>

    <div class="shower-details-container">
      <p>
        View <select id="shower-select"></select> on <span id="current-date" title="Adjust this date at the top right"></span>
      </p>
      <p>
        <span id="restore-view" class="button">View Solar System</span>
        <span id="lock-earth" class="button">Follow Earth</span>
        <span id="lock-earth-view" class="button">Watch from Earth</span>
        <span id="btn-iau-input" class="button">Input IAU Number</span>
      </p>
    </div>
    <div>
      <span class="hide-summary toggle-summary">-</span>
      <span class="show-summary toggle-summary">+</span>
    </div>
  </div>

  <!-- Three.JS Container -->
  <div id="container"></div>

  <div id="sky-map" style="display: none">
    <img src="img/skymaps/perseids_north.jpg">
    <span>Source: meteorshowersonline.com</span>
  </div>

  <div id="global-tooltip"></div>

  <div id="skymap-modal" class="modal">
  </div>

  <div id="faq-modal" class="modal">
    <h2>What am I looking at?</h2>
    <p>
      Meteor showers on Earth are caused by streams of meteoroids hitting our atmosphere. These meteoroids are sand- and pebble-sized bits of rock that were once released from their parent comet. Some comets are no longer active and are now called asteroids.
    </p>
    <p>
    This visualization shows these meteoroid streams orbiting the Sun, some stretching to the outer regions of the solar system. Select the meteor shower in the menu to see the corresponding meteoroid stream in space. Their meteoroid orbits are based on those measured by NASA's <a href="http://cams.seti.org">CAMS video camera surveillance network</a>, and were calculated by meteor astronomer <a href="https://en.wikipedia.org/wiki/Peter_Jenniskens">Peter Jenniskens</a> of the SETI Institute and NASA Ames Research Center.
    </p>
    <h2>How can I see a meteor shower?</h2>
    <p>
      Meteor showers are best seen on certain dark and clear nights. To see how many meteors per hour are visible from your location, go to <a href="http://leonid.arc.nasa.gov/estimator.html">this website</a> and select the date, the shower, and your location.
    </p>
    <h2>Where should I go next?</h2>
    <p>
      If you like these sorts of interactive visualizations, take a look at programmer <a href="http://www.ianww.com">Ian Webster</a>'s other tools: <a href="http://www.ianww.com/pluto">Pluto</a>, <a href="http://dinosaurpictures.org/ancient-earth/#600">ancient Earth</a>, or <a href="http://www.asterank.com">asteroids</a>!
    <p>
  </div>

  <div id="instructions">
    Click and drag to turn. Scroll to zoom.
  </div>


  <!-- Nav and other interesting things -->
<!--
  <div id="left-nav"></div>
  <div id="btn-left-nav-toggle">-</div>
-->

  <div id="loading-container" style="display:none">
    <h2>Loading shower data...</h2>
    <p id="loading-message"></p>
  </div>

  <script type="x-shader/x-vertex" id="orbit-vertex-shader">
    // MIT License.
    // Copyright Ian Webster 2012 (asterank.com)
    // https://github.com/typpo/asterank/blob/master/LICENSE
    #define pi 3.141592653589793238462643383279

    attribute vec3 value_color;
    varying vec3 vColor;

    attribute float size;

    uniform float earth_i;
    uniform float earth_om;

    uniform float jed;

    attribute float a;
    attribute float e;
    attribute float i;
    attribute float o;
    attribute float P;
    attribute float ma;
    attribute float n;
    attribute float w;
    attribute float epoch;

    attribute float locked;
    attribute float is_planet;
    varying float vLocked;
    varying float vPlanet;

    vec3 getAstroPos() {
      float i_rad = i * pi/180.0;
      float o_rad = o * pi/180.0; // longitude of ascending node
      float p_rad = w * pi/180.0; // LONGITUDE of perihelion
      float ma_rad = ma * pi/180.0;
      float n_rad;
      if (P > 0.) {
        n_rad = 2.0 * pi / P;
      } else {
        n_rad = n * pi/180.0; // mean motion
      }

      float d = jed - epoch;
      float M = ma_rad + n_rad * d;

      // Estimate eccentric and true anom using iterative approx
      float E0 = M;
      // converted do/while:
      float E1 = M + e * sin(E0);
      float lastdiff = abs(E1-E0);
      E0 = E1;
      for (int foo=0; foo < 25; foo++) {
        E1 = M + e * sin(E0);
        lastdiff = abs(E1-E0);
        E0 = E1;
        if (lastdiff < 0.0000001) {
          break;
        }
      }

      float E = E0;
      float v = 2.0 * atan(sqrt((1.0+e)/(1.0-e)) * tan(E/2.0));

      // radius vector, in AU
      float r = a * (1.0 - e*e) / (1.0 + e * cos(v)) * 50.;  // 50 pixels per AU

      // heliocentric coords
      float X = r * (cos(o_rad) * cos(v + p_rad - o_rad) - sin(o_rad) * sin(v + p_rad - o_rad) * cos(i_rad));
      float Y = r * (sin(o_rad) * cos(v + p_rad - o_rad) + cos(o_rad) * sin(v + p_rad - o_rad) * cos(i_rad));
      float Z = r * (sin(v + p_rad - o_rad) * sin(i_rad));
      return vec3(X, Y, Z);
    }

    void main() {
      vColor = value_color;
      vLocked = locked;
      vPlanet = is_planet;

      vec3 newpos = getAstroPos();
      vec4 mvPosition = modelViewMatrix * vec4(newpos, 1.0);
      gl_Position = projectionMatrix * mvPosition;
      gl_PointSize = size;
    }
  </script>
  <script type="x-shader/x-fragment" id="orbit-fragment-shader">
    // MIT License.
    // Copyright Ian Webster 2012 (asterank.com)
    // https://github.com/typpo/asterank/blob/master/LICENSE
    varying vec3 vColor;
    varying float vLocked;
    varying float vPlanet;
    uniform sampler2D planet_texture;
    uniform sampler2D small_roid_texture;
    uniform sampler2D small_roid_circled_texture;

    void main() {
      if (vLocked < .5) {
        if (vPlanet < .5) {
          gl_FragColor = vec4(vColor, 1.0) * texture2D(small_roid_texture,
            vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y));
        }
        else {
          gl_FragColor = vec4(vColor, 1.0) * texture2D(planet_texture,
            vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y));
        }
      } else {
        gl_FragColor = vec4(vColor, 1.0) * texture2D(small_roid_circled_texture,
          vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y));
      }
    }
  </script>

  <script type="application/x-glsl" id="sky-vertex">
    varying vec2 vUV;
    varying float vDensity;
    varying float vDiff;

    void main() {
      vUV = uv;
      vec4 pos = vec4(position, 1.0);
      gl_Position = projectionMatrix * modelViewMatrix * pos;
    }
  </script>

  <script type="application/x-glsl" id="sky-density">
    uniform sampler2D texture;
    varying vec2 vUV;

    void main() {
      vec4 sample = texture2D(texture, vUV);
      gl_FragColor = vec4(sample.xyz, sample.w);
    }
  </script>

  <!-- Include vendor scripts -->
  <script type="text/javascript" src="lib/jquery.min.js"></script>
  <script type="text/javascript" src="lib/jquery.modal.min.js"></script>
  <script type="text/javascript" src="lib/three.min.js"></script>
  <script type="text/javascript" src="lib/THREEx.WindowResize.js"></script>
  <script type="text/javascript" src="lib/THREEx.FullScreen.js"></script>
  <script type="text/javascript" src="lib/TrackballControls.js"></script>
  <script type="text/javascript" src="lib/Detector.js"></script>
  <script type="text/javascript" src="lib/stats.min.js"></script>
  <script type="text/javascript" src="lib/screenfull.min.js"></script>
  <script type="text/javascript" src="lib/threex.domevents.js"></script>
  <script type="text/javascript" src="lib/dat.gui.js"></script>

  <!-- My scripts -->
  <script type="text/javascript" src="js/data/capricornid.js"></script>
  <script type="text/javascript" src="js/data/lyrid.js"></script>
  <script type="text/javascript" src="js/data/showers.js"></script>

  <script type="text/javascript" src="js/util.js"></script>
  <script type="text/javascript" src="js/ephemeris.js"></script>
  <script type="text/javascript" src="js/ellipse.js"></script>
  <script type="text/javascript" src="js/asterank3d.js"></script>
  <script type="text/javascript" src="js/ui.js"></script>
  <script type="text/javascript" src="js/entrypoint.js"></script>

<!-- start Mixpanel --><script type="text/javascript">(function(d,c){var a,b,g,e;a=d.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===d.location.protocol?"https:":"http:")+'//api.mixpanel.com/site_media/js/api/mixpanel.2.js';b=d.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);c._i=[];c.init=function(a,d,f){var b=c;"undefined"!==typeof f?b=c[f]=[]:f="mixpanel";g="disable track track_pageview track_links track_forms register register_once unregister identify name_tag set_config".split(" ");
  for(e=0;e<g.length;e++)(function(a){b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}})(g[e]);c._i.push([a,d,f])};window.mixpanel=c})(document,[]);
  mixpanel.init("33c7e2f25d35df78f45321ffd7525b2b");</script><!-- end Mixpanel -->
<script>mixpanel.track('meteors');</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-52596552-1', 'auto');
  ga('send', 'pageview');
</script>
  <noscript>
    <p>You need Javascript enabled in order to use this web application.</p>
  </noscript>
</body>
</html>
